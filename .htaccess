# さくらのレンタルサーバー用 .htaccess設定

# PythonでWSGIアプリケーションを実行
LoadModule wsgi_module modules/mod_wsgi.so

# WSGIの設定
WSGIDaemonProcess django python-path=/home/your-username/www/sakura_oshare_answers
WSGIProcessGroup django
WSGIScriptAlias / /home/your-username/www/sakura_oshare_answers/oshare_style_answers/wsgi_production.py

# 静的ファイルの設定
Alias /static /home/your-username/www/sakura_oshare_answers/static
<Directory /home/your-username/www/sakura_oshare_answers/static>
    Require all granted
</Directory>

# メディアファイルの設定
Alias /media /home/your-username/www/sakura_oshare_answers/media
<Directory /home/your-username/www/sakura_oshare_answers/media>
    Require all granted
</Directory>

# WSGIファイルへのアクセス設定
<Directory /home/your-username/www/sakura_oshare_answers/oshare_style_answers>
    <Files wsgi_production.py>
        Require all granted
    </Files>
</Directory>

# セキュリティ設定
<Files "*.py">
    Require all denied
</Files>

<Files "wsgi_production.py">
    Require all granted
</Files>

# ファイルアップロード制限
LimitRequestBody 10485760  # 10MB

# 圧縮設定
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# キャッシュ設定
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/pdf "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType application/x-javascript "access plus 1 month"
    ExpiresByType application/x-shockwave-flash "access plus 1 month"
    ExpiresByType image/x-icon "access plus 1 year"
    ExpiresDefault "access plus 2 days"
</IfModule>
